
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Renderizado del lado servidor — Vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Renderizado del lado servidor — Vue.js">
        <meta property="og:description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta property="og:image" content="https:///vuejs.org/images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Renderizado del lado servidor — Vue.js">
        <meta name="twitter:description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="twitter:image" content="https://vuejs.org/images/logo.png">

        <link rel="icon" href="/vuejs.org/images/logo.png" type="image/x-icon">

        <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Dosis:500&text=Vue.js' rel='stylesheet' type='text/css'>

        <!-- main page styles -->
        <link rel="stylesheet" href="/vuejs.org/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/vuejs.org/js/vue.js"></script>
        <script>window.PAGE_TYPE = "guia"</script>

        <!-- ga -->
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-46852172-1', 'vuejs.org');
          ga('send', 'pageview');
        </script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/vuejs.org/">
    <img src="/vuejs.org/images/logo.png">
    <span>Vue.js</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/vuejs.org/v2/guide/" class="nav-link current">Guia</a></li>
<li><a href="/vuejs.org/v2/api/" class="nav-link">API</a></li>
<li><a href="/vuejs.org/v2/examples/" class="nav-link">Ejemplos</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosistema</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Ayuda</h4></li>
    <li><ul>
      <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Foro</a></li>
      <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
      <li><a href="https://github.com/vuejs-templates" class="nav-link" target="_blank">Plantillas</a></li>
    </ul></li>
    <li><h4>Novedades</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Blog</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">Trabajos</a></li>
    </ul></li>
    <li><h4>Complementos principales</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
    </ul></li>
    <li><h4>Listado de recursos</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Repos oficiales</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>



<li class="nav-dropdown-container language">
  <a class="nav-link">Traducciones</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://cn.vuejs.org/" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/" class="nav-link" target="_blank">한국어</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/vuejs.org/v2/guide/" class="nav-link current">Guia</a></li>
<li><a href="/vuejs.org/v2/api/" class="nav-link">API</a></li>
<li><a href="/vuejs.org/v2/examples/" class="nav-link">Ejemplos</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosistema</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Ayuda</h4></li>
    <li><ul>
      <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">Foro</a></li>
      <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">Chat</a></li>
      <li><a href="https://github.com/vuejs-templates" class="nav-link" target="_blank">Plantillas</a></li>
    </ul></li>
    <li><h4>Novedades</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://medium.com/the-vue-point" class="nav-link" target="_blank">Blog</a></li>
      <li><a href="https://vuejobs.com/?ref=vuejs" class="nav-link" target="_blank">Trabajos</a></li>
    </ul></li>
    <li><h4>Complementos principales</h4></li>
    <li><ul>
      <li><a href="https://router.vuejs.org/" class="nav-link" target="_blank">Vue Router</a></li>
      <li><a href="https://vuex.vuejs.org/" class="nav-link" target="_blank">Vuex</a></li>
    </ul></li>
    <li><h4>Listado de recursos</h4></li>
    <li><ul>
      <li><a href="https://github.com/vuejs" class="nav-link" target="_blank">Repos oficiales</a></li>
      <li><a href="https://github.com/vuejs/awesome-vue" class="nav-link" target="_blank">Awesome Vue</a></li>
    </ul></li>
  </ul>
</li>



<li class="nav-dropdown-container language">
  <a class="nav-link">Traducciones</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://cn.vuejs.org/" class="nav-link" target="_blank">中文</a></li>
    <li><a href="https://jp.vuejs.org/" class="nav-link" target="_blank">日本語</a></li>
    <li><a href="https://ru.vuejs.org/" class="nav-link" target="_blank">Русский</a></li>
    <li><a href="https://kr.vuejs.org/" class="nav-link" target="_blank">한국어</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <div class="main-sponsor">
            <span>Patrocinado por</span><br>
            <a href="http://www.thedifferenceengine.io/" target="_blank"
                style="background-color: #f3f3f3; padding: 10px 0">
                <img src="/vuejs.org/images/tde.png ">
            </a>
        </div>
        <a class="become-backer" href="/vuejs.org/support-vuejs">
            Conviértete en un Backer
        </a>
        <h2>
            Guia
            
                <select class="version-select">
                    <option value="SELF" selected>2.0</option>
                    <option value="v1">1.0</option>
                    <option value="012">0.12</option>
                    <option value="011">0.11</option>
                </select>
            
        </h2>
        <ul class="menu-root">
            
                
                
                    
                      <li><h3>Inicio</h3></li>
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/installation.html" class="sidebar-link">Instalación</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/index.html" class="sidebar-link">Introducción</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/instance.html" class="sidebar-link">La instancia de Vue</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/syntax.html" class="sidebar-link">Sintaxis de plantillas</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/computed.html" class="sidebar-link">Propiedades computadas y observadores</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/class-and-style.html" class="sidebar-link">Enlace de estilos y clases</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/conditional.html" class="sidebar-link">Renderizado condicional</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/list.html" class="sidebar-link">Renderizado de listas</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/events.html" class="sidebar-link">Manejo de eventos</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/forms.html" class="sidebar-link">Enlaces con campos de formulario</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/components.html" class="sidebar-link">Componentes</a>
                </li>
            
                
                
                    
                    
                      <li><h3>Avanzado</h3></li>
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/reactivity.html" class="sidebar-link">Reactividad en profundidad</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/transitions.html" class="sidebar-link">Efectos de transición</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/transitioning-state.html" class="sidebar-link">Transiciones en el estado</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/render-function.html" class="sidebar-link">Funciones de renderizado</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/custom-directive.html" class="sidebar-link">Directivas personalizadas</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/mixins.html" class="sidebar-link">Mixins</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/plugins.html" class="sidebar-link">Complementos</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/single-file-components.html" class="sidebar-link">Componentes de un solo archivo</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/deployment.html" class="sidebar-link">Consejos para el despliegue a producción</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/routing.html" class="sidebar-link">Enrutamiento</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/state-management.html" class="sidebar-link">Manejo de estado</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/unit-testing.html" class="sidebar-link">Pruebas unitarias</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/ssr.html" class="sidebar-link current">Renderizado del lado servidor</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/typescript.html" class="sidebar-link">Soporte para TypeScript</a>
                </li>
            
                
                
                    
                    
                    
                      <li><h3>Migrando</h3></li>
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/migration.html" class="sidebar-link">Migration from Vue 1.x</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/migration-vue-router.html" class="sidebar-link">Migration from Vue Router 0.7.x</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/migration-vuex.html" class="sidebar-link">Migration from Vuex 0.6.x to 1.0</a>
                </li>
            
                
                
                    
                    
                    
                    
                      <li><h3>Meta</h3></li>
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/comparison.html" class="sidebar-link">Comparison with Other Frameworks</a>
                </li>
            
                
                
                    
                    
                    
                    
                
                
                <li>
                    <a href="/vuejs.org/v2/guide/join.html" class="sidebar-link">Join the Vue.js Community!</a>
                </li>
            
            
        </ul>
    </div>
</div>


<div class="content guia with-sidebar ">
    
      <div id="ad">
  <!-- <span>Sponsored By</span><br>
  <a href="http://www.thedifferenceengine.io/" target="_blank"
    style="background-color: rgba(0,0,0,.85); padding: 10px 0">
    <img src="/vuejs.org/images/tde.png">
  </a> -->
  <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs" id="_carbonads_js"></script>
</div>

    
    
      <h1>Renderizado del lado servidor</h1>
    
    <h2 id="¿Necesitas-SSR"><a href="#¿Necesitas-SSR" class="headerlink" title="¿Necesitas SSR?"></a>¿Necesitas SSR?</h2><p>Antes de introducirnos en el SSR, veamos que es lo que realmente hace por ti y cuando puede ser que lo necesites.</p>
<h3 id="SEO"><a href="#SEO" class="headerlink" title="SEO"></a>SEO</h3><p>Google y Bing pueden indexar correctamente aplicaciones JavaScript síncronas. <em>Síncronas</em> siendo la palabra clave. Si tu aplicación comienza con un indicador de carga y luego obtiene información utilizando AJAX, el <em>crawler</em> no esperará a que termines.</p>
<p>Esto significa que si tienes contenido recuperado asíncronicamente en páginas donde el SEO es importante, SSR puede ser necesario.</p>
<h3 id="Clientes-con-una-conexion-lenta-a-Internet"><a href="#Clientes-con-una-conexion-lenta-a-Internet" class="headerlink" title="Clientes con una conexión lenta a Internet"></a>Clientes con una conexión lenta a Internet</h3><p>Puede que los usuarios naveguen a tu sitio desde un área remota con conexiones lentas a Internet - o simplemente con una mala conexión desde el celular. En estos casos, querrás minimizar el número y tamaño de las peticiones necesarias para que los usuarios puedan ver el contenido básico.</p>
<p>Puedes utilizar <a href="https://webpack.js.org/guides/code-splitting-require/" target="_blank" rel="external">el divisor de código de Webpack</a> para evitar forzar a los usuarios a descargar tu aplicación entera para ver una única página, pero aún no será igual de rápido que bajar un solo archivo HTML pre-renderizado.</p>
<h3 id="Clientes-con-un-motor-JavaScript-antiguo-o-sin-soporte-JavaScript"><a href="#Clientes-con-un-motor-JavaScript-antiguo-o-sin-soporte-JavaScript" class="headerlink" title="Clientes con un motor JavaScript antiguo (o sin soporte JavaScript)"></a>Clientes con un motor JavaScript antiguo (o sin soporte JavaScript)</h3><p>En algunos lugares del mundo, utilizar una computadora del año 1998 para acceder a Internet puede ser la única opción. Mientras que Vue solo funciona con IE9 o superiors, tal vez quieras devolver algo de contenido básico a estos usuarios con navegadores antiguos - o a los hackers <em>hipsters</em> que utilizan <a href="http://lynx.browser.org/" target="_blank" rel="external">Lynx</a> en una consola.</p>
<h3 id="SSR-vs-Pre-renderizado"><a href="#SSR-vs-Pre-renderizado" class="headerlink" title="SSR vs Pre-renderizado"></a>SSR vs Pre-renderizado</h3><p>Si solo estás invetigando SSR para mejorar el SEO de un puñado de páginas de marketing/presentación (por ejemplo. <code>/</code>, <code>/about</code>, <code>/contact</code>, etc), entonces lo que probablemente desees sea <strong>pre-renderizado</strong>. En lugar de utilizar un servidor web para compilar HTML en tiempo real, el pre-renderizado simplemente genera archivos HTML estáticos para rutas específicas en el momento de compilación. La ventaja es que configurar el pre-renderizado es mucho más sencillo y te permite mantener tu <em>frontend</em> como un sitio completamente estático.</p>
<p>Si estás utilizando Webpack, puedes añadir pre-renderizado muy fácilmente con <a href="https://github.com/chrisvfritz/prerender-spa-plugin" target="_blank" rel="external">prerender-spa-plugin</a>. Ha sido probado extensamente con aplicaciones Vue y, de hecho, el creador es un miembro del equipo de trabajo de Vue.</p>
<h2 id="Hola-mundo"><a href="#Hola-mundo" class="headerlink" title="Hola mundo"></a>Hola mundo</h2><p>Si llegaste hasta aquí, estás listo para ver SSR en acción. Suena complejo, pero un <em>script</em> node con esta característica requiere solo de 3 pasos:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Paso 1: Crear una instancia de Vue</span></div><div class="line"><span class="keyword">var</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</div><div class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">render</span>: <span class="function"><span class="keyword">function</span> (<span class="params">h</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> h(<span class="string">'p'</span>, <span class="string">'hello world'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// Paso 2: Crear un renderizador</span></div><div class="line"><span class="keyword">var</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</div><div class="line"></div><div class="line"><span class="comment">// Paso 3: Renderizar la instancia de Vue en el HTML</span></div><div class="line">renderer.renderToString(app, <span class="function"><span class="keyword">function</span> (<span class="params">error, html</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error</div><div class="line">  <span class="built_in">console</span>.log(html)</div><div class="line">  <span class="comment">// =&gt; &lt;p server-rendered="true"&gt;hello world&lt;/p&gt;</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>No es tan complicado, ¿verdad?. Por supuesto, este ejemplo es mucho más simple que la mayoría de las aplicaciones. No tenemos que preocuparnos todavía por:</p>
<ul>
<li>Un servidor web</li>
<li>Respuestas como Streaming</li>
<li>Cacheo de componentes</li>
<li>Un proceso de compilación/empaquetamiento</li>
<li>Enrutamiento</li>
<li>Regeneración del estado de Vuex</li>
</ul>
<p>En el resto de esta guia, repasaremos como trabajar con alguna de estas características. Una vez que entiendas los conceptos básicos, te indicaremos donde leer más documentación y ejemplos avanzados para ayudarte a manejar casos extremos.</p>
<h2 id="SSR-sencillo-con-el-servidor-web-Express"><a href="#SSR-sencillo-con-el-servidor-web-Express" class="headerlink" title="SSR sencillo con el servidor web Express"></a>SSR sencillo con el servidor web Express</h2><p>Es un poco difícil llarlo “renderizado del lado servidor” cuando en realidad no tenemos un servidor web, así que arreglemos eso. Vamos a construir una aplicación SSR muy sencilla utilizando solo ES5 sin ningún proceso de compilación ni complementos de Vue.</p>
<p>Empezaremos con una aplicación que le indica al usuario cuantos segundos ha estado en la página:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;div&gt;You have been here for &#123;&#123; counter &#125;&#125; seconds.&lt;/div&gt;'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;</div><div class="line">    <span class="attr">counter</span>: <span class="number">0</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">created</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span></div><div class="line">    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      vm.counter += <span class="number">1</span></div><div class="line">    &#125;, <span class="number">1000</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Para adaptar esto para SSR, hay algunas pocas modificaciones que tendremos que hacer, para que funcione tanto en los navegadores como con node:</p>
<ul>
<li>Cuando estemos en un navegador, añadir una instancia de nuestra aplicación al contexto global (es decir, <code>window</code>), para que podamos montarla.</li>
<li>Cuando estemos en node, exportar una función factoría para que podamos crear una instancia nueva de la aplicación para cada petición.</li>
</ul>
<p>Lograr esto requiere un poco más de código:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// assets/app.js</span></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="string">'use strict'</span></div><div class="line">  <span class="keyword">var</span> createApp = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// ----------------------------</span></div><div class="line">    <span class="comment">// COMIENZA EL CÓDIGO DE LA APP</span></div><div class="line">    <span class="comment">// ----------------------------</span></div><div class="line"></div><div class="line">    <span class="comment">// La instancia principal debe ser devuelta y tener un </span></div><div class="line">    <span class="comment">// nodo raíz con el id "app", para que la versión del lado </span></div><div class="line">    <span class="comment">// cliente pueda tomar el control una vez que cargue.</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Vue(&#123;</div><div class="line">      <span class="attr">template</span>: <span class="string">'&lt;div id="app"&gt;You have been here for &#123;&#123; counter &#125;&#125; seconds.&lt;/div&gt;'</span>,</div><div class="line">      <span class="attr">data</span>: &#123;</div><div class="line">        <span class="attr">counter</span>: <span class="number">0</span></div><div class="line">      &#125;,</div><div class="line">      <span class="attr">created</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> vm = <span class="keyword">this</span></div><div class="line">        setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">          vm.counter += <span class="number">1</span></div><div class="line">        &#125;, <span class="number">1000</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line"></div><div class="line">    <span class="comment">// ---------------------------</span></div><div class="line">    <span class="comment">// TERMINA EL CÓDIGO DE LA APP</span></div><div class="line">    <span class="comment">// ---------------------------</span></div><div class="line">  &#125;</div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">module</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">module</span>.exports) &#123;</div><div class="line">    <span class="built_in">module</span>.exports = createApp</div><div class="line">  &#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="keyword">this</span>.app = createApp()</div><div class="line">  &#125;</div><div class="line">&#125;).call(<span class="keyword">this</span>)</div></pre></td></tr></table></figure>
<p>Ahora que tenemos el código de nuestra aplicación, creemos un archivo <code>index.html</code>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="comment">&lt;!-- index.html --&gt;</span></div><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>My Vue App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/assets/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/assets/app.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript">app.$mount(<span class="string">'#app'</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Mientras que el directorio <code>assets</code> referenciado contenga el archivo <code>app.js</code> que creamos anteriormente junto con el archivo<code>vue.js</code> con Vue, ¡deberíamos tener una aplicación de una sola página funcionando!</p>
<p>Luego, para hacerla funcionar con el renderizado del lado servidor, hay un solo paso extra - el servidor web:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// server.js</span></div><div class="line"><span class="meta">'use strict'</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</div><div class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"></div><div class="line"><span class="comment">// Define global.Vue para app.js funcionando del lado servidor</span></div><div class="line">global.Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</div><div class="line"></div><div class="line"><span class="comment">// Obtén la estructura HTML</span></div><div class="line"><span class="keyword">var</span> layout = fs.readFileSync(<span class="string">'./index.html'</span>, <span class="string">'utf8'</span>)</div><div class="line"></div><div class="line"><span class="comment">// Crea un renderizador</span></div><div class="line"><span class="keyword">var</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</div><div class="line"></div><div class="line"><span class="comment">// Crea un servidor express</span></div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</div><div class="line"><span class="keyword">var</span> server = express()</div><div class="line"></div><div class="line"><span class="comment">// Sirve los archivos desde el directorio de recursos</span></div><div class="line">server.use(<span class="string">'/assets'</span>, express.static(</div><div class="line">  path.resolve(__dirname, <span class="string">'assets'</span>)</div><div class="line">))</div><div class="line"></div><div class="line"><span class="comment">// Maneja las peticiones GET</span></div><div class="line">server.get(<span class="string">'*'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</div><div class="line">  <span class="comment">// Renderiza nuestra app Vue a una cadena de texto</span></div><div class="line">  renderer.renderToString(</div><div class="line">    <span class="comment">// Crea una instancia de app</span></div><div class="line">    <span class="built_in">require</span>(<span class="string">'./assets/app'</span>)(),</div><div class="line">    <span class="comment">// Maneja el resultado del renderizado</span></div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">error, html</span>) </span>&#123;</div><div class="line">      <span class="comment">// Si ocurre un error durante el renderizado</span></div><div class="line">      <span class="keyword">if</span> (error) &#123;</div><div class="line">        <span class="comment">// Registra el error en la consola</span></div><div class="line">        <span class="built_in">console</span>.error(error)</div><div class="line">        <span class="comment">// Avisa al cliente que algo sucedio</span></div><div class="line">        <span class="keyword">return</span> response</div><div class="line">          .status(<span class="number">500</span>)</div><div class="line">          .send(<span class="string">'Server Error'</span>)</div><div class="line">      &#125;</div><div class="line">      <span class="comment">// Envia la estructura con el HTML renderizado de la aplicación</span></div><div class="line">      response.send(layout.replace(<span class="string">'&lt;div id="app"&gt;&lt;/div&gt;'</span>, html))</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="comment">// Escucha en el puerto 5000</span></div><div class="line">server.listen(<span class="number">5000</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">  <span class="keyword">if</span> (error) <span class="keyword">throw</span> error</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Server is running at localhost:5000'</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>¡Y eso es todo! Aquí está <a href="https://github.com/chrisvfritz/vue-ssr-demo-simple" target="_blank" rel="external">la aplicación completa</a>, en caso que quieras clonarla y experimentar un poco más. Una vez que la ejecutes localmente, puedes confirmar que el renderizado del lado servidor está realmente funcionando haciendo clic derecho en la página y seleccionando <code>View Page Source</code> (o similar). Deberías ver esto en el <code>body</code>:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span> <span class="attr">server-rendered</span>=<span class="string">"true"</span>&gt;</span>You have been here for 0 seconds&amp;period;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>en lugar de:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Respuesta-como-Streaming"><a href="#Respuesta-como-Streaming" class="headerlink" title="Respuesta como Streaming"></a>Respuesta como Streaming</h2><p>Vue tambén soporta renderizar a un <strong>stream</strong>, lo cual se prefiere para servidores web que soporten <em>streaming</em>. Esto permite que el HTML sea escrito a la respuesta <em>a medida que es generado</em>, en lugar de escribirlo todo junto al final. El resultado es que las respuestas son devueltas más rápido, ¡y no hay contras!</p>
<p>Para adaptar tu aplicación de la sección anterior y utilizar <em>streaming</em>, podemos simplemente reemplazar los bloques <code>server.get(&#39;*&#39;, ...)</code> con lo siguiente:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Divide la estructura en dos secciones de HTML</span></div><div class="line"><span class="keyword">var</span> layoutSections = layout.split(<span class="string">'&lt;div id="app"&gt;&lt;/div&gt;'</span>)</div><div class="line"><span class="keyword">var</span> preAppHTML = layoutSections[<span class="number">0</span>]</div><div class="line"><span class="keyword">var</span> postAppHTML = layoutSections[<span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="comment">// Maneja todas las peticiones GET</span></div><div class="line">server.get(<span class="string">'*'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">request, response</span>) </span>&#123;</div><div class="line">  <span class="comment">// Renderiza nuestra aplicación Vue a un _stream_</span></div><div class="line">  <span class="keyword">var</span> stream = renderer.renderToStream(<span class="built_in">require</span>(<span class="string">'./assets/app'</span>)())</div><div class="line"></div><div class="line">  <span class="comment">// Escribe el HTML preAppHtml en la respuesta</span></div><div class="line">  response.write(preAppHTML)</div><div class="line"></div><div class="line">  <span class="comment">// Cada vez que nuevas porciones son renderizadas...</span></div><div class="line">  stream.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">chunk</span>) </span>&#123;</div><div class="line">    <span class="comment">// Escribe la porción en la respuesta</span></div><div class="line">    response.write(chunk)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="comment">// Cuando todas las porciones son renderizadas...</span></div><div class="line">  stream.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">// Escribe el HTML postAppHTML en la respuesta</span></div><div class="line">    response.end(postAppHTML)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  <span class="comment">// Si ocurre un error durante el renderizado...</span></div><div class="line">  stream.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</div><div class="line">    <span class="comment">// Registra el error en la consola</span></div><div class="line">    <span class="built_in">console</span>.error(error)</div><div class="line">    <span class="comment">// Informa al cliente que algo sucedió</span></div><div class="line">    <span class="keyword">return</span> response</div><div class="line">      .status(<span class="number">500</span>)</div><div class="line">      .send(<span class="string">'Server Error'</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Como puedes ver, no es mucho más complicada que la versión anterior, incluso si los streams son conceptualmente nuevos para ti. Simplemente:</p>
<ol>
<li>Incializamos el stream</li>
<li>Escribimos en la respuesta el HTML necesario previo a la aplicacion</li>
<li>Escribimos en la respuesta el HTML de la aplicación a medida que está disponible</li>
<li>Escribimos en la respuesta el HTML necesario posterior a la aplicacion y luego la finalizamos</li>
<li>Manejamos cualquier error que haya surgido</li>
</ol>
<h2 id="Cacheo-de-componentes"><a href="#Cacheo-de-componentes" class="headerlink" title="Cacheo de componentes"></a>Cacheo de componentes</h2><p>El SSR de Vue es muy rápido por defecto, pero puedes mejorar aún más el rendimiento cacheando componentes renderizados. Sin embargo, esto debe considerarse una característica avanzada, dado que cachear los componentes equivocados (o los componentes correctos con la llave equivocada) puede conducir a errores en el renderizado de tu aplicación. Específicamente:</p>
<p class="tip">No debes cachear un coponente que contiene componentes hijo que dependen de estado global (por ejemplo, desde un <em>store</em> de vuex). Si lo haces, esos componentes hijo (y, de hecho, todo el sub-árbol) será también cacheado. Se especialmente cuidadoso con componentes que aceptan slots/hijos.</p>

<h3 id="Configuracion"><a href="#Configuracion" class="headerlink" title="Configuración"></a>Configuración</h3><p>Con esa advertencia fuera del camino, así es como cacheas tus componentes.</p>
<p>Primero, necesitarás asignar a tu renderizador un <a href="https://www.npmjs.com/package/vue-server-renderer#cache" target="_blank" rel="external">objeto cache</a>. Aquí hay un ejemplo sencillo utilizando <a href="https://github.com/isaacs/node-lru-cache" target="_blank" rel="external">lru-cache</a>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> createRenderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer</div><div class="line"><span class="keyword">var</span> lru = <span class="built_in">require</span>(<span class="string">'lru-cache'</span>)</div><div class="line"></div><div class="line"><span class="keyword">var</span> renderer = createRenderer(&#123;</div><div class="line">  <span class="attr">cache</span>: lru(<span class="number">1000</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Eso cacheará hasta 1000 renderizados únicos. Para otras configuraciones que se ajustan mejor al uso de memoria, verifica las <a href="https://github.com/isaacs/node-lru-cache#options" target="_blank" rel="external">opciones de lru-cache</a>.</p>
<p>Luego, para componentes que desees cachear, debes asignarles:</p>
<ul>
<li>un <code>name</code> único</li>
<li>una función <code>serverCacheKey</code>, devolviendo una llave única en el ámbito del componente</li>
</ul>
<p>Por ejemplo:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">Vue.component(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'list-item'</span>,</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;li&gt;&#123;&#123; item.name &#125;&#125;&lt;/li&gt;'</span>,</div><div class="line">  <span class="attr">props</span>: [<span class="string">'item'</span>],</div><div class="line">  <span class="attr">serverCacheKey</span>: <span class="function"><span class="keyword">function</span> (<span class="params">props</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> props.item.type + <span class="string">'::'</span> + props.item.id</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Componentes-ideales-para-cacheo"><a href="#Componentes-ideales-para-cacheo" class="headerlink" title="Componentes ideales para cacheo"></a>Componentes ideales para cacheo</h3><p>Cualquier componente “puro” puede ser cacheado sin problemas - esto es, cualquier componente que puedas garantizar que renderizará el mismo HTML dadas las mismas propiedades. Ejemplos comunes de esto son:</p>
<ul>
<li>Componentes estáticos (i.e. siempre generan el mismo HTML, por lo que la función <code>serverCacheKey</code> puede directamente devolver <code>true</code>)</li>
<li>Componentes elemento de una lista (cuando se trabaja con listas grandes, cachear estos puede mejorar el rendimiento significativamente)</li>
<li>Componentes de UI genéricos (e.g. botones, alertas, etc - al menos aquellos que aceptan contenido a travéd e propiedades en lugar de slots/hijos)</li>
</ul>
<h2 id="Proceso-de-compilacion-ruteo-y-regeneracion-de-estado-de-Vuex"><a href="#Proceso-de-compilacion-ruteo-y-regeneracion-de-estado-de-Vuex" class="headerlink" title="Proceso de compilación, ruteo y regeneración de estado de Vuex"></a>Proceso de compilación, ruteo y regeneración de estado de Vuex</h2><p>En este punto, deberías entender los conceptos fundamentales detrás del renderizado del lado servidor. Sin embargo, a medida que agregas un proceso de compilación/empaquetamiento, ruteo y vuex, cada uno introduce sus propias consideraciones.</p>
<p>Para dominar realmente el renderizado del lado servidor en aplicaciones complejas, te recomendamos leer detenidamente los siguientes enlaces:</p>
<ul>
<li><a href="https://www.npmjs.com/package/vue-server-renderer#api" target="_blank" rel="external">Documentación de vue-server-renderer</a>: mayor detalle en los temas tratados aquí, así como documentación de temas más avanzados, como <a href="https://www.npmjs.com/package/vue-server-renderer#why-use-bundlerenderer" target="_blank" rel="external">prevenir contaminación de peticiones cruzadas</a> y <a href="https://www.npmjs.com/package/vue-server-renderer#creating-the-server-bundle" target="_blank" rel="external">añadir un build de servidor separado</a></li>
<li><a href="https://github.com/vuejs/vue-hackernews-2.0" target="_blank" rel="external">vue-hackernews-2.0</a>: el ejemplo definitivo de integración de todas las bibliotecas principales y conceptos de Vue en una sola aplicación.</li>
</ul>
<h2 id="Nuxt-js"><a href="#Nuxt-js" class="headerlink" title="Nuxt.js"></a>Nuxt.js</h2><p>Configurar apropiadamente todos los aspectos discutidos de una aplicación renderizada del lado servidor preparada para producción puede ser una tarea intimidante. Por suerte, existe un excelente proyecto de la comunidad que apunta a hacer todo esto mucho más sencillo: <a href="https://nuxtjs.org/" target="_blank" rel="external">Nuxt.js</a>. Nuxt.js es un framework de nivel superior construído sobre el ecosistema de Vue, el cual provee una experiencia de desarrollo extremadamente eficiente para escribir aplicaciones Vue universales. Aún mejor, puedes usarlo como un generador de sitios estático (con las páginas creadas como componentes de un solo archivo de Vue). Recomendamos fervientemente que lo pruebes.</p>

    
    <div class="footer">
      ¿Encontraste un error o quieres contribuir con la documentación?
      <a href="https://github.com/vuejs/vuejs.org/blob/master/src/v2/guide/ssr.md" target="_blank">
        ¡Edita esta página en Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/vuejs.org/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->        
        <script src="/vuejs.org/js/css.escape.js"></script>
        <script src="/vuejs.org/js/common.js"></script>

        <!-- search -->
        <link href="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css" rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/vuejs.org/css/search.css">
        <script src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          // search index defaults to v2
          var match = window.location.pathname.match(/^\/(v\d+)/)
          var version = match ? match[1] : 'v2'
          docsearch({
            appId: 'BH4D9OD16A',
            apiKey: '85cc3221c9f23bfbaa4e3913dd7625ea',
            indexName: 'vuejs',
            inputSelector: selector,
            algoliaOptions: { facetFilters: ["version:" + version] }
          })
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
